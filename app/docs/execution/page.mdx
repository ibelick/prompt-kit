import ComponentCodePreview from "@/components/app/component-code-preview"
import { generateMetadata } from "../utils/metadata"
import { ExecutionBasic } from "./execution-basic"
import { ExecutionIconSwap } from "./execution-icon-swap"
import { ExecutionWithLoader } from "./execution-with-loader"
import { ExecutionWithSource } from "./execution-with-source"

export const metadata = generateMetadata(
  "Execution",
  "Composable execution blocks with collapsible sections and items."
)

# Execution

Displays a sequence of steps in a collapsible layout. Each step can include details and a customizable vertical bar. Useful for showing workflows, reasoning traces, or process logs in AI applications.

## Examples

### Execution basic

<ComponentCodePreview
  component={<ExecutionBasic />}
  filePath="app/docs/execution/execution-basic.tsx"
  classNameComponentContainer="p-8 justify-start items-start min-h-[300px]"
/>

### Execution with sources

You can use the [Source](/docs/source) component to display sources in the execution block.

<ComponentCodePreview
  component={<ExecutionWithSource />}
  filePath="app/docs/execution/execution-with-source.tsx"
  classNameComponentContainer="p-8 justify-start items-start min-h-[300px]"
/>

### Execution with custom icons swap and bar

<ComponentCodePreview
  component={<ExecutionIconSwap />}
  filePath="app/docs/execution/execution-icon-swap.tsx"
  classNameComponentContainer="p-8 justify-start items-start min-h-[300px]"
/>

### Execution with Text Shimmer Loader

You can use the [Loader](/docs/loader) component to display a text shimmer loader in the execution block.

<ComponentCodePreview
  component={<ExecutionWithLoader />}
  filePath="app/docs/execution/execution-with-loader.tsx"
  classNameComponentContainer="p-8 justify-start items-start min-h-[300px]"
/>

## Installation

<Tabs defaultValue="cli">

<TabsList>
  <TabsTrigger value="cli">CLI</TabsTrigger>
  <TabsTrigger value="manual">Manual</TabsTrigger>
</TabsList>

<TabsContent value="cli">

<CodeBlock
  code={`npx shadcn add "https://prompt-kit.com/c/execution.json"`}
  language="bash"
/>

</TabsContent>

<TabsContent value="manual">

<Steps>

<Step>Copy and paste the following code into your project.</Step>

<CodeBlock filePath="components/prompt-kit/execution.tsx" language="tsx" />

<Step>Update the import paths to match your project setup.</Step>

</Steps>

</TabsContent>

<TabsContent value="examples">

<CodeBlock
  filePath="app/docs/execution/execution-icon-swap.tsx"
  language="tsx"
/>
<CodeBlock
  filePath="app/docs/execution/execution-with-loader.tsx"
  language="tsx"
/>

</TabsContent>

</Tabs>

## Component API

### Execution

| Prop        | Type                                | Default | Description                           |
| :---------- | :---------------------------------- | :------ | :------------------------------------ |
| defaultOpen | boolean                             | true    | Whether the execution starts expanded |
| className   | string                              |         | Additional CSS classes                |
| ...props    | `React.ComponentProps<Collapsible>` |         | Root collapsible component props      |

### ExecutionTrigger

| Prop            | Type            | Default | Description                                               |
| :-------------- | :-------------- | :------ | :-------------------------------------------------------- |
| children        | React.ReactNode |         | Trigger content (label)                                   |
| leftIcon        | React.ReactNode |         | Optional left icon area; keeps width to avoid layout jump |
| swapIconOnHover | boolean         | true    | Swap leftIcon with chevron on hover                       |
| className       | string          |         | Additional CSS classes                                    |
| ...props        | `React.ComponentProps<CollapsibleTrigger>` |         | Trigger props forwarded to `CollapsibleTrigger`           |

### ExecutionContent

| Prop      | Type                                       | Default          | Description                                |
| :-------- | :----------------------------------------- | :--------------- | :----------------------------------------- |
| className | string                                     |                  | Additional CSS classes                     |
| bar       | React.ReactNode                            | `<ExecutionBar />` | Optional bar element rendered at the left |
| ...props  | `React.ComponentProps<CollapsibleContent>` |                  | Collapsible content props                  |

### ExecutionBar

| Prop      | Type                                   | Default                     | Description                        |
| :-------- | :------------------------------------- | :-------------------------- | :--------------------------------- |
| className | string                                 | `bg-muted h-full w-[2px]`   | Classes for positioning and style  |
| ...props  | `React.HTMLAttributes<HTMLDivElement>` |                            | Pass-through div attributes/styles |

### ExecutionItem

| Prop      | Type            | Default | Description            |
| :-------- | :-------------- | :------ | :--------------------- |
| children  | React.ReactNode |         | Row item content       |
| className | string          |         | Additional CSS classes |
| ...props  | `React.ComponentProps<'div'>` |   | Pass-through div attributes/styles |

### ExecutionRoot

| Prop        | Type                                | Default | Description                           |
| :---------- | :---------------------------------- | :------ | :------------------------------------ |
| defaultOpen | boolean                             | true    | Whether the execution starts expanded |
| className   | string                              |         | Additional CSS classes                |
| ...props    | `React.ComponentProps<Collapsible>` |         | Root collapsible component props      |
